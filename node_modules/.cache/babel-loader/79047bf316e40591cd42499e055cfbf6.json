{"ast":null,"code":"import _defineProperty from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\text video\\\\geniehut-Geni-App-Code\\\\geniehut-Geni-App-Code\\\\front-end\\\\src\\\\components\\\\Layout\\\\ChangeMobileNumber.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport IntlTelInput from 'react-intl-tel-input';\nimport 'react-intl-tel-input/dist/main.css';\nimport cookie from 'react-cookies';\nimport $ from 'jquery';\nimport { appName } from \"../Config/Config\";\nimport SuccessMsg from '../../common/images/success-msg.png';\nimport ErrorMsg from '../../common/images/error-msg.png';\nimport { isNumber } from \"../Helpers/SettingHelper\";\nimport { GET_IPDATA, GET_USERPROFILE, GET_MOBILEUPDATE, GET_CHANGEMOBILE, GET_MOBILE_COUNTRY } from '../../actions';\nimport Parser from 'html-react-parser';\n\nvar ChangeMobileNumber =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ChangeMobileNumber, _Component);\n\n  function ChangeMobileNumber(props) {\n    var _this;\n\n    _classCallCheck(this, ChangeMobileNumber);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChangeMobileNumber).call(this, props));\n\n    _this.getipdetails = function () {\n      $.getJSON(\"http://jsonip.com?callback=?\", function (data) {\n        cookie.save(\"ipaddress\", data.ip);\n      });\n\n      var qs = require('qs');\n\n      var postObject = {\n        \"app_name\": appName,\n        \"ipaddress\": cookie.load('ipaddress')\n      };\n\n      _this.props.getIpData(qs.stringify(postObject));\n    };\n\n    _this.sendotp = function () {\n      if (_this.validateForm()) {\n        var formPayload = _this.state;\n\n        var qs = require('qs');\n\n        var ccode;\n\n        if (_this.state.countrycode !== '') {\n          ccode = _this.state.countrycode;\n        } else {\n          ccode = formPayload.selectedcode;\n        }\n\n        var postObject = {\n          \"app_name\": appName,\n          \"user_token\": cookie.load('UserAuthToken'),\n          \"user_mobile\": formPayload.user_mobile,\n          \"country_code\": ccode,\n          \"iso2\": formPayload.selectregion,\n          \"action\": 'send_otp'\n        };\n\n        _this.props.getMobileUpdate(qs.stringify(postObject));\n      }\n    };\n\n    _this.changemobilenumber = function () {\n      if (_this.validateotp()) {\n        var formPayload = _this.state;\n\n        var qs = require('qs');\n\n        var ccode;\n\n        if (_this.state.countrycode !== '') {\n          ccode = _this.state.countrycode;\n        } else {\n          ccode = formPayload.selectedcode;\n        }\n\n        var postObject = {\n          \"app_name\": appName,\n          \"user_token\": cookie.load('UserAuthToken'),\n          \"user_mobile\": formPayload.user_mobile,\n          \"country_code\": ccode,\n          \"iso2\": formPayload.selectregion,\n          \"otp\": formPayload.mobile_change_otp\n        };\n\n        _this.setState({\n          Loading: true\n        });\n\n        _this.props.getChangeMobile(qs.stringify(postObject));\n      }\n    };\n\n    _this.handleChangeTxt = function (valid, event, object) {\n      _this.setState({\n        countrycode: object.dialCode\n      });\n\n      _this.setState({\n        user_mobile: event\n      });\n\n      _this.setState({\n        validphone: valid\n      });\n    };\n\n    _this.editform = function (valid, inputphone, object, fullnumber) {\n      _this.setState({\n        validphone: valid\n      });\n\n      _this.setState({\n        selectedcode: object.dialCode\n      });\n\n      _this.setState({\n        selectregion: object.iso2\n      });\n\n      var errors = {};\n      var formIsValid = true;\n\n      if (valid === false) {\n        _this.setState({\n          mobileError: 1\n        });\n\n        formIsValid = false;\n        $('.errorusermobile').html('<span class=\"errorspan\">Please enter valid mobile number</span>');\n      } else if (valid === true) {\n        _this.setState({\n          mobileError: 0\n        });\n\n        $('.errorusermobile').html('');\n      }\n\n      _this.setState({\n        errors: errors\n      });\n\n      return formIsValid;\n    };\n\n    _this.state = {\n      clientip: '',\n      user_mobile: _this.props.mobilenumber,\n      old_mobile: _this.props.mobilenumber,\n      selectiso2: '',\n      selectedcode: '',\n      selectregion: '',\n      countrycode: '',\n      mobile_change_otp: '',\n      validphone: '',\n      mobileError: 0,\n      completeotp: 0,\n      enableOTPEnter: 0,\n      startsendOTP: 0,\n      resendTime: 15,\n      resendOTPTime: 15,\n      enableResend: 0,\n      startresendOTP: 0,\n      Loading: false,\n      countryList: [],\n      responsemsgotp: ''\n    };\n\n    _this.props.getMobileCountry();\n\n    _this.getipdetails();\n\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ChangeMobileNumber, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!cookie.load('UserAuthToken')) {\n        window.location.href = \"/logout\";\n      }\n    }\n  }, {\n    key: \"handleInputChange\",\n    value: function handleInputChange(event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState(_defineProperty({}, name, value));\n      /* if(name === 'mobile_change_otp'){\n         var regexPattern=new RegExp(/^[0-9-+]+$/);\n         if(!regexPattern.test(value)){\n            $('.errorotp').html('<span class=\"errorspan\">Please enter valid number</span>');\n         }else{\n            $('.errorvendormobile').html('');\n         }\n      }*/\n    }\n    /*   closepopup(){\n         $('.genie-close-btn').parents(\"#genie-popup\").removeClass(\"genie-popup-open\");\n       }*/\n\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      var _this$state = this.state,\n          user_mobile = _this$state.user_mobile,\n          validphone = _this$state.validphone;\n      var formIsValid = true;\n\n      if (!user_mobile) {\n        formIsValid = false;\n        this.setState({\n          mobileError: 1\n        });\n        $('.errorusermobile').html('<span class=\"errorspan\">Please enter your mobile number</span>');\n      } else if (user_mobile) {\n        this.setState({\n          mobileError: 0\n        });\n        $('.errorusermobile').html('');\n      }\n\n      if (validphone === false) {\n        formIsValid = false;\n        this.setState({\n          mobileError: 1\n        });\n        $('.errorusermobile').html('<span class=\"errorspan\">Please enter your mobile number</span>');\n      } else if (validphone === true) {\n        this.setState({\n          mobileError: 0\n        });\n        $('.errorusermobile').html('');\n      }\n\n      return formIsValid;\n    }\n    /* change phone number */\n\n  }, {\n    key: \"validateotp\",\n    value: function validateotp() {\n      var mobile_change_otp = this.state.mobile_change_otp;\n      var formIsValid = true;\n\n      if (!mobile_change_otp) {\n        formIsValid = false;\n        $('.errorotp').html('<span class=\"errorspan\">Please enter your otp</span>');\n      } else if (mobile_change_otp) {\n        $('.errorotp').html('');\n      }\n\n      return formIsValid;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(Props) {\n      var _this2 = this;\n\n      if (Props.ipaddress !== this.props.ipaddress) {\n        if (Props.ipaddress[0] !== '') {\n          this.setState({\n            clientip: Props.ipaddress[0]\n          });\n        }\n      }\n\n      if (Props.userprofile !== this.props.userprofile) {\n        if (Props.userprofile[0].status === 'success') {\n          var formdata = Props.userprofile[0].result_user_set;\n\n          if (formdata.user_mobile !== '') {\n            this.setState({\n              user_mobile: formdata.user_mobile\n            });\n          }\n\n          if (Props.userprofile[0].shortcode !== '') {\n            cookie.save(\"selectiso2\", Props.userprofile[0].shortcode);\n          }\n        }\n      }\n\n      if (Props.mobileupdate !== this.props.mobileupdate) {\n        this.setState({\n          Loading: false\n        });\n\n        if (Props.mobileupdate[0].status === 'success') {\n          var current = this;\n\n          if (this.state.startsendOTP === 0) {\n            this.setState({\n              startsendOTP: 1,\n              enableOTPEnter: 1\n            });\n            setInterval(function () {\n              var resendTime = current.state.resendTime - 1;\n\n              if (resendTime === 0) {\n                current.setState({\n                  enableResend: 1\n                });\n              }\n\n              if (resendTime > 0) {\n                current.setState({\n                  resendTime: resendTime\n                });\n              }\n            }, 1000);\n          } else if (this.state.startsendOTP === 1 && this.state.startresendOTP === 0) {\n            this.setState({\n              completeotp: 1\n            });\n          }\n\n          setTimeout(function () {\n            _this2.setState({\n              responsemsgotp: Parser('<h5 class=\"msg-text text-center\">' + Props.mobileupdate[0].message + '</h5>')\n            });\n          }, 1000);\n        } else {\n          setTimeout(function () {\n            _this2.setState({\n              responsemsgotp: Parser('<h5 class=\"msg-text text-center\">' + Props.mobileupdate[0].message + '</h5>')\n            });\n          }, 1000);\n        }\n      }\n\n      if (Props.changemobile !== this.props.changemobile) {\n        if (Props.changemobile[0].status === 'success') {\n          $(\"#genie-popup\").addClass(\"genie-popup-open\");\n          $('.genie-msg-popup-body').html('<div class=\"state_img text-center\"><img src=\"' + SuccessMsg + '\" alt=\"SuccessMsg\" /></div><h2 class=\"title3\">Success</h2><p>' + Props.changemobile[0].message + '</p> ');\n          this.props.passedFunction('yes');\n          cookie.save(\"UserMobile\", Props.changemobile[0].mobilenumber);\n        } else {\n          $(\"#genie-popup\").addClass(\"genie-popup-open\");\n          $('.genie-msg-popup-body').html('<div class=\"state_img text-center\"><img src=\"' + ErrorMsg + '\"alt=\"ErrorMsg\" /></div><h2 class=\"title3\">Error</h2><p>' + Props.changemobile[0].message + '</p>');\n        }\n      }\n\n      if (Props.mobilecountry !== this.props.mobilecountry) {\n        this.setState({\n          mobilecountry: Props.mobilecountry[0].result_set\n        }, function () {\n          this.loadCountryList();\n        });\n      }\n    }\n  }, {\n    key: \"loadCountryList\",\n    value: function loadCountryList() {\n      var country = [];\n      this.state.mobilecountry.map(function (countries) {\n        return country.push(countries.short_code.toLowerCase());\n      });\n      this.setState({\n        countryList: country\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var defaultip = this.state.clientip;\n\n      if (defaultip !== '') {\n        return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, \"Mobile Number\"), React.createElement(\"div\", {\n          className: \"account-mobile-wrap SOP_Style\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"account-mobileno\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, React.createElement(IntlTelInput, {\n          className: \"form-control\",\n          name: \"user_mobile\",\n          id: \"user_mobile\",\n          defaultCountry: cookie.load('selectiso2') ? cookie.load('selectiso2') : defaultip,\n          separateDialCode: \"true\",\n          onPhoneNumberBlur: this.editform.bind(this),\n          value: this.state.user_mobile,\n          onPhoneNumberChange: this.handleChangeTxt.bind(this),\n          preferredCountries: this.state.countryList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }), this.state.old_mobile !== this.state.user_mobile && this.state.mobileError === 0 && this.state.completeotp === 0 && React.createElement(\"span\", {\n          className: \"account-mobileno-edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }, this.state.enableResend === 0 && this.state.startsendOTP === 0 && React.createElement(\"button\", {\n          className: \"account-editsave-link\",\n          type: \"button\",\n          onClick: this.sendotp.bind(this),\n          disabled: this.state.Loading === true ? true : false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }, \" \", this.state.Loading === true && React.createElement(\"span\", {\n          class: \"load-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, \"Loading\"), \" Send OTP\"), this.state.resendTime > 0 && this.state.startsendOTP === 1 && this.state.enableResend === 0 && React.createElement(\"button\", {\n          className: \"account-editsave-link\",\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, this.state.resendTime), this.state.enableResend === 1 && this.state.startresendOTP === 0 && React.createElement(\"button\", {\n          className: \"account-editsave-link\",\n          type: \"button\",\n          onClick: this.sendotp.bind(this),\n          disabled: this.state.Loading === true ? true : false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, \" \", this.state.Loading === true && React.createElement(\"span\", {\n          class: \"load-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, \"Loading\"), \" Re-Send OTP\")), React.createElement(\"div\", {\n          className: \"errorusermobile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314\n          },\n          __self: this\n        })))), this.state.startsendOTP === 1 && React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }, \"Enter OTP\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"mobile_change_otp\",\n          placeholder: \"Enter OTP\",\n          value: this.state.mobile_change_otp,\n          onChange: this.handleInputChange,\n          maxLength: \"6\",\n          onKeyPress: function onKeyPress(e) {\n            return isNumber(e);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"errorotp\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324\n          },\n          __self: this\n        }))), this.state.old_mobile !== this.state.user_mobile && this.state.completeotp === 1 && React.createElement(\"button\", {\n          className: \"btn btn_blue btn_minwid change-btn animate-btn2\",\n          onClick: this.changemobilenumber.bind(this),\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        }, \"Submit\"), this.state.responsemsgotp);\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"loading loading-h-200\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return ChangeMobileNumber;\n}(Component);\n\nvar mapStateTopProps = function mapStateTopProps(state) {\n  return {\n    ipaddress: state.ip,\n    userprofile: state.userprofile,\n    mobileupdate: state.mobileupdate,\n    changemobile: state.changemobile,\n    mobilecountry: state.mobilecountry\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getIpData: function getIpData(ipaddress) {\n      dispatch({\n        type: GET_IPDATA,\n        ipaddress: ipaddress\n      });\n    },\n    getUserProfile: function getUserProfile(usertoken) {\n      dispatch({\n        type: GET_USERPROFILE,\n        usertoken: usertoken\n      });\n    },\n    getMobileUpdate: function getMobileUpdate(formPayload) {\n      dispatch({\n        type: GET_MOBILEUPDATE,\n        formPayload: formPayload\n      });\n    },\n    getChangeMobile: function getChangeMobile(formPayload) {\n      dispatch({\n        type: GET_CHANGEMOBILE,\n        formPayload: formPayload\n      });\n    },\n    getMobileCountry: function getMobileCountry() {\n      dispatch({\n        type: GET_MOBILE_COUNTRY\n      });\n    }\n  };\n};\n\nexport default connect(mapStateTopProps, mapDispatchToProps)(withRouter(ChangeMobileNumber));","map":{"version":3,"sources":["D:/text video/geniehut-Geni-App-Code/geniehut-Geni-App-Code/front-end/src/components/Layout/ChangeMobileNumber.js"],"names":["React","Component","withRouter","connect","IntlTelInput","cookie","$","appName","SuccessMsg","ErrorMsg","isNumber","GET_IPDATA","GET_USERPROFILE","GET_MOBILEUPDATE","GET_CHANGEMOBILE","GET_MOBILE_COUNTRY","Parser","ChangeMobileNumber","props","getipdetails","getJSON","data","save","ip","qs","require","postObject","load","getIpData","stringify","sendotp","validateForm","formPayload","state","ccode","countrycode","selectedcode","user_mobile","selectregion","getMobileUpdate","changemobilenumber","validateotp","mobile_change_otp","setState","Loading","getChangeMobile","handleChangeTxt","valid","event","object","dialCode","validphone","editform","inputphone","fullnumber","iso2","errors","formIsValid","mobileError","html","clientip","mobilenumber","old_mobile","selectiso2","completeotp","enableOTPEnter","startsendOTP","resendTime","resendOTPTime","enableResend","startresendOTP","countryList","responsemsgotp","getMobileCountry","handleInputChange","bind","window","location","href","target","name","value","Props","ipaddress","userprofile","status","formdata","result_user_set","shortcode","mobileupdate","current","setInterval","setTimeout","message","changemobile","addClass","passedFunction","mobilecountry","result_set","loadCountryList","country","map","countries","push","short_code","toLowerCase","defaultip","e","mapStateTopProps","mapDispatchToProps","dispatch","type","getUserProfile","usertoken"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport IntlTelInput from 'react-intl-tel-input';\nimport 'react-intl-tel-input/dist/main.css';\nimport cookie from 'react-cookies';\nimport $ from 'jquery';\nimport { appName } from \"../Config/Config\";\nimport SuccessMsg from '../../common/images/success-msg.png';\nimport ErrorMsg from '../../common/images/error-msg.png';\nimport { isNumber } from \"../Helpers/SettingHelper\";\nimport { GET_IPDATA, GET_USERPROFILE, GET_MOBILEUPDATE, GET_CHANGEMOBILE, GET_MOBILE_COUNTRY } from '../../actions';\nimport Parser from 'html-react-parser';\n\nclass ChangeMobileNumber extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\t\n            this.state = {\n              clientip:'',\n              user_mobile: this.props.mobilenumber,\n              old_mobile: this.props.mobilenumber,\n              selectiso2:'',\n              selectedcode:'',\n              selectregion:'',\n              countrycode:'',\n              mobile_change_otp:'',\n              validphone: '',\n              mobileError:0,\n              completeotp:0,\n              enableOTPEnter:0,\n              startsendOTP:0,\n              resendTime:15,\n              resendOTPTime:15,\n              enableResend:0,\n              startresendOTP:0,\n              Loading:false,\n              countryList:[],\n              responsemsgotp:''\n              }\n          this.props.getMobileCountry();\n          this.getipdetails();\n          this.handleInputChange = this.handleInputChange.bind(this);\n\t  }\n\ncomponentDidMount(){\n    if(!cookie.load('UserAuthToken')){\n      window.location.href = \"/logout\";\n    }\n}\n\n handleInputChange(event) {\n    \n      const {name, value} = event.target;\n\n      this.setState({\n          [name]: value\n      });\n\n    /* if(name === 'mobile_change_otp'){\n       var regexPattern=new RegExp(/^[0-9-+]+$/);\n       if(!regexPattern.test(value)){\n          $('.errorotp').html('<span class=\"errorspan\">Please enter valid number</span>');\n       }else{\n          $('.errorvendormobile').html('');\n       }\n    }*/\n      \n }\n\n /*   closepopup(){\n      $('.genie-close-btn').parents(\"#genie-popup\").removeClass(\"genie-popup-open\");\n    }*/\n\n    getipdetails =() => {\n    $.getJSON(\"http://jsonip.com?callback=?\", function (data) {\n        cookie.save(\"ipaddress\",data.ip);\n    });\n\n    var qs = require('qs');\n      var postObject = {\n      \"app_name\": appName,\n      \"ipaddress\": cookie.load('ipaddress')\n      };\n    this.props.getIpData(qs.stringify(postObject));\n\n  }\n /* send otp */ \nsendotp = () => {\n    if(this.validateForm()){\n\n      const formPayload = this.state;\n      var qs = require('qs');\n       var ccode;\n      if(this.state.countrycode!==''){\n          ccode =this.state.countrycode;\n      }else{\n          ccode =formPayload.selectedcode;\n      }\n\n      var postObject = {\n      \"app_name\": appName,\n      \"user_token\": cookie.load('UserAuthToken'), \n      \"user_mobile\": formPayload.user_mobile,\n      \"country_code\": ccode,\n      \"iso2\": formPayload.selectregion,\n      \"action\":'send_otp'\n    };\n    \n    \n      this.props.getMobileUpdate(qs.stringify(postObject));\n    }\n\n  }\n\n  validateForm(){\n    const {user_mobile, validphone} = this.state;\n    let formIsValid = true;\n    if (!user_mobile) {\n      formIsValid = false;\n      this.setState({mobileError:1});\n      $('.errorusermobile').html('<span class=\"errorspan\">Please enter your mobile number</span>');\n    }else if(user_mobile){\n      this.setState({mobileError:0});\n      $('.errorusermobile').html('');\n    }\n\n    if(validphone === false){\n      formIsValid = false;\n      this.setState({mobileError:1});\n      $('.errorusermobile').html('<span class=\"errorspan\">Please enter your mobile number</span>');\n    }else if(validphone === true){\n      this.setState({mobileError:0});\n      $('.errorusermobile').html('');\n    }\n\n     return formIsValid;\n  }\n/* change phone number */\n changemobilenumber = () => {\n     if(this.validateotp()){\n\n      const formPayload = this.state;\n      var qs = require('qs');\n      var ccode;\n      if(this.state.countrycode!==''){\n          ccode =this.state.countrycode;\n      }else{\n          ccode =formPayload.selectedcode;\n      }\n\n      var postObject = {\n      \"app_name\": appName,\n      \"user_token\": cookie.load('UserAuthToken'), \n      \"user_mobile\": formPayload.user_mobile,\n      \"country_code\": ccode,\n      \"iso2\": formPayload.selectregion,\n      \"otp\": formPayload.mobile_change_otp\n    };\n    this.setState({Loading:true});\n      this.props.getChangeMobile(qs.stringify(postObject));\n    }\n }\n\n   validateotp(){\n    const {mobile_change_otp} = this.state;\n    let formIsValid = true;\n    if (!mobile_change_otp) {\n      formIsValid = false;\n      $('.errorotp').html('<span class=\"errorspan\">Please enter your otp</span>');\n    }else if(mobile_change_otp){\n      $('.errorotp').html('');\n    }\n     return formIsValid;\n  }\n\n  \n\n componentWillReceiveProps(Props) {\n     if(Props.ipaddress !==this.props.ipaddress){\n        if(Props.ipaddress[0]!==''){\n          this.setState({clientip :Props.ipaddress[0]});\n        }\n     }\n\n     if(Props.userprofile !== this.props.userprofile){\n         if(Props.userprofile[0].status === 'success'){\n            const formdata = Props.userprofile[0].result_user_set;\n            \n            if(formdata.user_mobile!==''){\n                this.setState({ user_mobile : formdata.user_mobile})\n            }\n            if(Props.userprofile[0].shortcode!==''){\n             cookie.save(\"selectiso2\",Props.userprofile[0].shortcode);\n            }\n         }\n    }\n    if(Props.mobileupdate !== this.props.mobileupdate){\n        this.setState({Loading:false});\n         if(Props.mobileupdate[0].status === 'success'){\n          const current = this;\n          if(this.state.startsendOTP===0) {\n            this.setState({startsendOTP:1, enableOTPEnter:1});\n            setInterval(function(){ \n               let resendTime = current.state.resendTime-1;\n               if(resendTime===0){ current.setState({enableResend:1, }); }\n               if(resendTime>0){ current.setState({resendTime:resendTime}) }\n            }, 1000);\n          }\n          else if(this.state.startsendOTP===1 && this.state.startresendOTP===0) {\n            this.setState({completeotp:1});\n          }              \n              setTimeout(() => {\n                this.setState({responsemsgotp:Parser('<h5 class=\"msg-text text-center\">'+Props.mobileupdate[0].message+'</h5>') });\n              }, 1000)\n        }else{\n                setTimeout(() => {\n                this.setState({responsemsgotp:Parser('<h5 class=\"msg-text text-center\">'+Props.mobileupdate[0].message+'</h5>') });\n              }, 1000)\n          }\n\n    }\n     if(Props.changemobile !== this.props.changemobile){\n  \n         if(Props.changemobile[0].status === 'success'){\n            $(\"#genie-popup\").addClass(\"genie-popup-open\");\n            $('.genie-msg-popup-body').html('<div class=\"state_img text-center\"><img src=\"'+SuccessMsg+'\" alt=\"SuccessMsg\" /></div><h2 class=\"title3\">Success</h2><p>'+Props.changemobile[0].message+'</p> ');\n            this.props.passedFunction('yes');\n            cookie.save(\"UserMobile\",Props.changemobile[0].mobilenumber);\n                 \n        }else{\n          $(\"#genie-popup\").addClass(\"genie-popup-open\");\n          $('.genie-msg-popup-body').html('<div class=\"state_img text-center\"><img src=\"'+ErrorMsg+'\"alt=\"ErrorMsg\" /></div><h2 class=\"title3\">Error</h2><p>'+Props.changemobile[0].message+'</p>');\n          }\n\n    }\n    if(Props.mobilecountry !==this.props.mobilecountry){\n      this.setState({mobilecountry:Props.mobilecountry[0].result_set}, function() {\n        this.loadCountryList();\n      });\n    }\n\n  }\n  loadCountryList() {\n\t\tvar country= [];\n\t\tthis.state.mobilecountry.map(function(countries){\n\t\t\t\treturn country.push(countries.short_code.toLowerCase());\n\t\t});\n    this.setState({countryList:country});\n\t}\n\n handleChangeTxt = (valid, event,object) => { \n    this.setState({countrycode: object.dialCode});\n    this.setState({user_mobile :event });\n    this.setState({validphone: valid});\n }\n\neditform = (valid,inputphone,object,fullnumber)  => {\n    this.setState({validphone: valid});\n    this.setState({selectedcode : object.dialCode})\n    this.setState({selectregion : object.iso2})\n    let errors = {};\n    let formIsValid = true;\n    if(valid === false){\n      this.setState({mobileError:1});\n      formIsValid = false;\n      $('.errorusermobile').html('<span class=\"errorspan\">Please enter valid mobile number</span>');\n    }else if(valid === true){\n     this.setState({mobileError:0});\n     $('.errorusermobile').html('');\n    }\n    this.setState({\n      errors: errors\n    });\n\n    return formIsValid;\n  }\n\n\t \n  render() {\n  const defaultip  = this.state.clientip;\n   if(defaultip !== '') {\n    return (\n        <>\n                <div className=\"form-group\">\n                    <label>Mobile Number</label>\n                    <div className=\"account-mobile-wrap SOP_Style\">\n                      <div className=\"account-mobileno\">\n                         <IntlTelInput className=\"form-control\" name=\"user_mobile\" id=\"user_mobile\"\n                                defaultCountry={cookie.load('selectiso2')?cookie.load('selectiso2'):defaultip}\n                                separateDialCode='true'\n                                onPhoneNumberBlur={this.editform.bind(this)}\n                                value={this.state.user_mobile}\n                                onPhoneNumberChange={this.handleChangeTxt.bind(this) }\n                                preferredCountries={this.state.countryList}\n                          />\n                           {(this.state.old_mobile!==this.state.user_mobile && this.state.mobileError===0 && this.state.completeotp===0) &&\n                              <span className=\"account-mobileno-edit\">\n                                {(this.state.enableResend===0 && this.state.startsendOTP===0) &&\n                                  <button className=\"account-editsave-link\" type=\"button\" onClick={this.sendotp.bind(this)}  disabled={(this.state.Loading ===true)?true:false}> {this.state.Loading ===true &&\n                                        <span class=\"load-data\">Loading</span> \n                                        } Send OTP</button>\n                                }\n                                {(this.state.resendTime>0 && this.state.startsendOTP===1 && this.state.enableResend===0) &&\n                                <button className=\"account-editsave-link\" type=\"button\" >{this.state.resendTime}</button>\n                                }\n\n                                {(this.state.enableResend===1 && this.state.startresendOTP===0) &&\n                                  <button className=\"account-editsave-link\" type=\"button\" onClick={this.sendotp.bind(this)} disabled={(this.state.Loading ===true)?true:false}> {this.state.Loading ===true &&\n                                        <span class=\"load-data\">Loading</span> \n                                        } Re-Send OTP</button>\n                                }\n                              </span>\n                           }\n                          <div className=\"errorusermobile\"></div>\n                      </div>\n                    </div>\n                </div>\n                { (this.state.startsendOTP===1) &&\n                <div className=\"form-group\">\n                  \n                  <div>\n                    <label>Enter OTP</label>\n                    <input type=\"text\" className=\"form-control\" name=\"mobile_change_otp\"  placeholder=\"Enter OTP\"  value={this.state.mobile_change_otp} onChange={this.handleInputChange} maxLength=\"6\" onKeyPress={(e) => isNumber(e)}  />\n                    <div className=\"errorotp\"></div>\n                    </div>\n                  \n                </div>\n                }\n                    {(this.state.old_mobile!==this.state.user_mobile && this.state.completeotp===1) && <button className=\"btn btn_blue btn_minwid change-btn animate-btn2\" onClick={this.changemobilenumber.bind(this)} type=\"button\">Submit</button>}\n                    {this.state.responsemsgotp}\n          {/* <div className=\"genie-msg-popup-wrapper\" id=\"genie-popup\">\n              <div className=\"genie-msg-popup-inner-wrapper\">\n                  <a onClick={this.closepopup} className=\"genie-close-btn\"><i className=\"fa fa-times\" aria-hidden=\"true\"></i></a>\n                    <div className=\"genie-msg-popup-body\">\n                  </div>\n                   <div onClick={this.closepopup} className=\"genie-msg-popup-btn\"><button className=\"btn btn_orange btn_minwid genie-close-btn\" type=\"button\">Ok</button></div>\n              </div>\n            </div>*/}\n        </>\n    );\n  }else{\n    return (<div><div className=\"loading loading-h-200\"></div></div>);\n  }\n  }\n}\n\nconst mapStateTopProps = (state) => {\n  return {\n    ipaddress     : state.ip,\n    userprofile   : state.userprofile,\n    mobileupdate  : state.mobileupdate,\n    changemobile  : state.changemobile,\n    mobilecountry\t: state.mobilecountry\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getIpData: (ipaddress) => {\n      dispatch({ type: GET_IPDATA, ipaddress});\n    },\n    getUserProfile: (usertoken) => {\n      dispatch({ type: GET_USERPROFILE, usertoken});\n    },\n    getMobileUpdate: (formPayload) => {\n      dispatch({ type: GET_MOBILEUPDATE, formPayload});\n    },\n    getChangeMobile: (formPayload) => {\n      dispatch({ type: GET_CHANGEMOBILE, formPayload});\n    },\n    getMobileCountry: () => {\n      dispatch({ type: GET_MOBILE_COUNTRY});\n    },\n  }\n}\nexport default connect(mapStateTopProps, mapDispatchToProps)(withRouter(ChangeMobileNumber));\n"]},"metadata":{},"sourceType":"module"}